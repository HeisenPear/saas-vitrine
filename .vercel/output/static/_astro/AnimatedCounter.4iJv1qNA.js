import{i as M,f as S,a as C,J as b,u as A,M as x,b as R,c as I,d as O,e as d,j,m as w}from"./proxy.CWcLdRko.js";import{r as u}from"./index.Be8AcK8B.js";import{u as F}from"./use-in-view.CuRfQczV.js";function J(...t){const n=!Array.isArray(t[0]),o=n?0:-1,s=t[0+o],e=t[1+o],r=t[2+o],a=t[3+o],i=M(e,r,a);return n?i(s):i}function L(t,n,o){const s=t.get();let e=null,r=s,a;const i=typeof s=="string"?s.replace(/[\d.-]/g,""):void 0,c=()=>{e&&(e.stop(),e=null)},l=()=>{c(),e=new b({keyframes:[V(t.get()),V(r)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...o,onUpdate:a})};if(t.attach((f,m)=>{r=f,a=p=>m(y(p,i)),S.postRender(l)},c),C(n)){const f=n.on("change",p=>t.set(y(p,i))),m=t.on("destroy",f);return()=>{f(),m()}}return c}function y(t,n){return n?t+n:t}function V(t){return typeof t=="number"?t:parseFloat(t)}function g(t){const n=A(()=>R(t)),{isStatic:o}=u.useContext(x);if(o){const[,s]=u.useState(t);u.useEffect(()=>n.on("change",s),[])}return n}function E(t,n){const o=g(n()),s=()=>o.set(n());return s(),I(()=>{const e=()=>S.preRender(s,!1,!0),r=t.map(a=>a.on("change",e));return()=>{r.forEach(a=>a()),O(s)}}),o}function $(t){d.current=[],t();const n=E(d.current,t);return d.current=void 0,n}function D(t,n,o,s){if(typeof t=="function")return $(t);const e=J(n,o,s);return Array.isArray(t)?h(t,e):h([t],([r])=>e(r))}function h(t,n){const o=A(()=>[]);return E(t,()=>{o.length=0;const s=t.length;for(let e=0;e<s;e++)o[e]=t[e].get();return n(o)})}function N(t,n={}){const{isStatic:o}=u.useContext(x),s=()=>C(t)?t.get():t;if(o)return D(s);const e=g(s());return u.useInsertionEffect(()=>L(e,t,n),[e,JSON.stringify(n)]),e}function q({value:t,duration:n=2,suffix:o="",prefix:s=""}){const e=u.useRef(null),r=g(0),a=N(r,{damping:50,stiffness:100,duration:n*1e3}),i=F(e,{once:!0,margin:"-100px"});return u.useEffect(()=>{i&&r.set(t)},[i,r,t]),u.useEffect(()=>{const c=a.on("change",l=>{e.current&&(e.current.textContent=`${s}${Math.round(l)}${o}`)});return()=>c()},[a,s,o]),j.jsx(w.span,{ref:e,initial:{opacity:0,scale:.5},animate:i?{opacity:1,scale:1}:{},transition:{duration:.5}})}export{q as default};
